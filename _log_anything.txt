18.10.27 00:47:29
SET @num = 0; 
SELECT distinct k.* 
FROM `uchenik-zadachi` INNER JOIN (
SELECT @num:=@num+1 as `new-sortirovka`, s.* 
FROM `uchenik-zadachi` INNER JOIN (
    SELECT 
        `uchenik-zadachi`.*, 
        `zadacha`.`pravilnyi-otvet`, 
        `zadacha`.`zadanie`, 
        `zadacha`.`id-podtemy`, 
        `zadacha`.`text-zadachi`, 
        `zadacha`.`foto-teksta`,
        `zadacha`.`slojnyi-otvet-1`,
        `zadacha`.`slojnyi-otvet-2`,
        `zadacha`.`slojnyi-otvet-3`
    FROM 
        `uchenik-zadachi`, 
        `zadacha` 
    WHERE 
        `uchenik-zadachi`.`id-zadachi`=`zadacha`.`id-zadachi` AND 
        `uchenik-zadachi`.`aktualno`=1 AND 
        `uchenik-zadachi`.`predmet`='informatika' AND 
        `uchenik-zadachi`.`urok`='2' AND 
        `uchenik-zadachi`.`uchenik`='aleksandr' 
    ORDER BY 
        `zadacha`.`zadanie`, 
        `uchenik-zadachi`.`sortirovka`) 
AS s ON s.`id-zadachi`=`uchenik-zadachi`.`id-zadachi` 
WHERE 
    `uchenik-zadachi`.`predmet`='informatika' AND 
    `uchenik-zadachi`.`uchenik`='aleksandr') 
as k ON k.`id-zadachi`=`uchenik-zadachi`.`id-zadachi` 
ORDER BY 
    `razobrat-na-zanyatii` DESC, 
    `resheno-pravilno` ASC, 
    `kolichestvo-popytok` DESC, 
    `zadanie`, 
    `id-podtemy`, 
    `sortirovka`;


